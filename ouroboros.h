/*===============================[[ beg code ]]===============================*/

/*===[[ ONE_LINERS ]]=========================================================*/
/*                      ┤иииииииии1иииииииии2иииииииии3иииииииии4иииииииии5иииииииии6иииииииии7*/
/*--------- 12345678901 ┤123456789-123456789-123456789-123456789-123456789-123456789-123456789-*/
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_FOCUS     "PS (programming support)"
#define     P_NICHE     "ut (unit testing)"
#define     P_SUBJECT   "master unit test sequencer"
#define     P_PURPOSE   "provide simple unit testing framework for writing scripts"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_NAMESAKE  "ouroboros-aperantos (tail-eater)"
#define     P_PRONOUNCE "ohrиohиbohrиohs"
#define     P_TRANSLATE "oura (tail) boros (eater) aperantos (vast, infinite, limitless)"
#define     P_HERITAGE  "the world-encircling serpent symbolizing eternal cyclic renewal"
#define     P_BRIEFLY   "symbol of cyclic renewal"
#define     P_IMAGERY   "powerful, world-encircling serpent swallowing its own tail"
#define     P_REASON    "symbol of life, death, and renewal matching up with testing"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_ONELINE   P_NAMESAKE " " P_SUBJECT
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_HOMEDIR   "/home/system/ouroboros.master_test_sequencer"
#define     P_BASENAME  "ouroboros"
#define     P_FULLPATH  "/usr/local/bin/ouroboros"
#define     P_SUFFIX    "иии"
#define     P_CONTENT   "иии"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_SYSTEM    "gnu/linux   (powerful, ubiquitous, technical, and hackable)"
#define     P_LANGUAGE  "ansi-c      (wicked, limitless, universal, and everlasting)"
#define     P_COMPILER  "gcc 5.3.0"
#define     P_CODESIZE  "small       (appoximately 1,000 slocl)"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_AUTHOR    "heatherlyrobert"
#define     P_CREATED   "2020-12"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_VERMAJOR  "0.-- preparing for production use"
#define     P_VERMINOR  "0.5- update to nodes being dynamic"
#define     P_VERNUM    "0.5p"
#define     P_VERTXT    "massive data set updated to include waves and tdb unit test"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_PRIORITY  "direct, simple, brief, vigorous, and lucid (h.w. fowler)"
#define     P_PRINCIPAL "[grow a set] and build your wings on the way down (r. bradbury)"
#define     P_REMINDER  "there are many better options, but i *own* every byte of this one"
#define     P_TOPGOAL   "fast and methodical tracing, debugging, and fixing under pressure"
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_HEADERS   P_FOCUS, P_NICHE, P_SUBJECT, P_PURPOSE, P_NAMESAKE, P_PRONOUNCE, P_HERITAGE, P_BRIEFLY, P_IMAGERY, P_REASON, P_ONELINE, P_HOMEDIR, P_BASENAME, P_FULLPATH, P_SUFFIX, P_CONTENT, P_SYSTEM, P_LANGUAGE, P_COMPILER, P_CODESIZE, NULL, NULL, NULL, NULL, NULL, NULL, NULL, P_AUTHOR, P_CREATED, P_VERMAJOR, P_VERMINOR, P_VERNUM, P_VERTXT
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
/*--------- 12345678901 ┤123456789-123456789-123456789-123456789-123456789-123456789-123456789-*/


/*===[[ INFORMATIONAL ]]======================================================*/
/*                      ┤иииииииии1иииииииии2иииииииии3иииииииии4иииииииии5иииииииии6иииииииии7*/
/*--------- 12345678901 ┤123456789-123456789-123456789-123456789-123456789-123456789-123456789-*/
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
#define     P_DEPSOLO   ""
#define     P_DEPUNIT   ""
#define     P_DEPUNIT   ""
#define     P_DEPANSI   ""
#define     P_DEPPOSIX  ""
#define     P_DEPCORE   ""
#define     P_DEPVIKEY  ""
#define     P_DEPGRAPH  ""
#define     P_DEPOTHER  ""
#define     P_DEPALIEN  ""
#define     P_DEPWTF    ""
/*иииииииии иииииииииии ┤иииииииииииииииииииииииииииии┤ииииииииииииииииииииииииииииииииииииииии*/
/*--------- 12345678901 ┤123456789-123456789-123456789-123456789-123456789-123456789-123456789-*/




/*
 *
 * #define     P_SUCCESS   "how fast, efficiently, and sugically can i fix it under pressure"
 * #define     P_SUCCESS   "how fast, efficiently, and sugically can i isolate, diagnose, and fix under pressure"
 *
 * #define     P_SUCCESS   "how fast, efficiently, and sugically can i isolate and fix under intense pressure"
 *
 */

/* ┤ииииииии1иииииииии2иииииииии3иииииииии4иииииииии5иииииииии6иииииииии7иииииииии8*/
/* 123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-*/

/*
 *
 * how fast, methodically, and reliably i can isolate and repair under intense pressure
 *
 * fast, methodical, and reliable trouble isolation, bypass, and repair under pressure
 *
 * fast, methodical, and reliable trouble diagnosis, mitigation, repair, and re-certificiation under pressure
 *
 *   without exception, programs always age badly, break, or go sideways when
 *   exposed to unusual, exceptional, and unforseen conditions.
 *
 *   without exception, programs behave badly, break, or go sideways when
 *   exposed to unusual, exceptional, and unforseen conditions.  my goal is to
 *   provide diagnosis and isolation tools to enable fast, methodical, and
 *   reliable mitigation and repair under presure and time constraints.
 *
 *   without exception, my goal is to provide fast, methodical, and reliable
 *   trouble diagnosis, mitigation, repair, and re-certification under pressure
 *   and time constraints, i.e., ready for a harsh world.
 *    -- logical boundaries and known interfaces
 *    -- clear logging, tracing,  to enable useful auditing
 *    -- ready fall-back points (and simpified versions)
 *    -- redundancies, fail-overs, and backup systems
 *    -- quick, clear, and proven auditing
 *
 * 
 *
 * assess
 * understand inputs and environment (logging keys and input helps)
 * isolate
 * re-create conditions
 * trace
 * debug
 * fix
 * retest
 * certify
 * migrate
 * restart
 *
 * #define     P_TOPGOAL   "how fast, efficiently, and sugically can you fix it under pressure"
 * #define     P_TOPGOAL   "fast and methodical tracing, isolate, debug, and fixing under pressure"
 *
 *
 */

/*
 *  GRAND PLAN
 *
 *  start with reading wave files put out by koios
 *
 *  then incorporate wave/stage descriptors from master.unit
 *
 *  control execution of scripts in order
 *
 *  controllable reporting on results
 *
 *  then create a central database of outcomes
 *
 *  pull sequences/dependencies between programs
 *
 *  control full code-base wide execution of unit tests
 *
 *  central reporting on code readiness
 *
 *
 * questions..
 *    -- keep a database?
 *    -- store program version?
 *    -- give scripts an enduring ID?
 *    -- keep old test results?
 *
 *
 */

/*===[[ HEADER GUARD ]]=======================================================*/
#ifndef YORUBOROS
#define YORUBOROS  loaded



/*===[[ STANDARD C LIBRARIES ]]===============================================*/
#include    <stdio.h>        /* C_ANSI : strcpy, strlen, strchr, strcmp, ...  */
#include    <string.h>       /* C_ANSI : printf, snprintf, fgets, fopen, ...  */
#include    <dirent.h>       /* POSIX  (11) opendir, readdir, alphasort       */
#include    <unistd.h>       /* POSIX  (11) opendir, readdir, alphasort       */
#include    <time.h>

/*===[[ CUSTOM LIBRARIES ]]===================================================*/
#include    <yLOG.h>         /* CUSTOM : heatherly program logging            */
#include    <ySTR.h>         /* CUSTOM : heatherly safer string handling      */
#include    <yURG.h>         /* CUSTOM : heatherly urgent processing          */
#include    <yENV.h>
#include    <yUNIT.h>        /* CUSTOM : heatherly unit testing               */
#include    <ySORT.h>        /* CUSTOM : heatherly sorting library            */
#include    <yPARSE.h>       /* CUSTOM : heatherly record parsing             */
#include    <yJOBS.h>
#include    <yASCII.h>
#include    <yCOLOR_solo.h>  /* CUSTOM : heatherly colorization library       */
#include    <yDLST_solo.h>   /* CUSTOM : heatherly linked-list library        */

typedef struct dirent    tDIRENT;
typedef struct FILE      tFILE;
typedef struct tm        tTIME;


#define     FILE_CENTRAL   "/var/lib/polymnia/ouroboros.tdb"
#define     FILE_UCENTRAL  "/tmp/ouroboros_central.tdb"

#define     F_DB          "/var/lib/ouroboros/ouroboros.db"

#define     RUN_HERE      'H'
#define     RUN_PURGE     'P'
#define     RUN_CREATE    'C'
#define     RUN_UPDATE    'U'
#define     RUN_REMOVE    'R'

#define     RUN_DUMP      'd'
#define     RUN_LIST      'l'
#define     RUN_SEQ       's'

typedef     struct cGLOBALS     tGLOBALS;
struct cGLOBALS
{
   /*---(yJOBS)--------------------------*/
   char        run_as;                      /* khronos, eos, heracles, ...    */
   char        run_mode;                    /* verify, install, audit, ...    */
   char        run_file    [LEN_PATH];      /* file to act on                 */
   int         run_uid;                     /* uid of person who launched     */
   long        run_start;
   /*---(general)------------------------*/
   char        version     [LEN_FULL];      /* program version info           */
   char        unit_answer [LEN_RECD];      /* response from unit testing     */
   char        path        [LEN_PATH];      /* base directory                 */
   char        proj        [LEN_LABEL];     /* project name                   */
   char        wave_min;
   char        wave_max;
   char        n_db        [LEN_PATH];      /* database name                  */
   FILE       *f_db;                        /* database file pointer          */
   char        n_home      [LEN_PATH];      /* directory launched in          */
   /*---(statistics)---------------------*/
   int         projs;
   int         units;
   int         scrps;
   int         conds;
   int         steps;
   /*---(results)------------------------*/
   int         ready;
   int         pass;
   int         fail;
   int         badd;
   int         othr;
   /*---(constant links)-----------------*/
   char        depsolo     [LEN_FULL];        /* _solo and/or _uver only     */
   char        depunit     [LEN_FULL];        /* unit testing tools required */
   /*---(code links)---------------------*/
   char        depansi     [LEN_FULL];        /* ansi-c standard             */
   char        depposix    [LEN_FULL];        /* beyond ansi-c standard      */
   char        depcore     [LEN_FULL];        /* absolutely everywhere       */
   char        depvikey    [LEN_FULL];        /* vikeys standard             */
   char        depgraph    [LEN_FULL];        /* curses or opengl related    */
   char        depother    [LEN_FULL];        /* non-core, vikey,or graphics */
   char        depalien    [LEN_FULL];        /* third-party or proprietary  */
   /*---(data links)---------------------*/
   char        depinpt     [LEN_FULL];        /* pure input files, conf, etc */
   char        depoutp     [LEN_FULL];        /* pure output files, reports  */
   char        depfile     [LEN_FULL];        /* master files, databases     */
   /*---(unknown link)-------------------*/
   char        depall      [LEN_RECD];        /* every dependency            */
   char        depwtf      [LEN_FULL];        /* unknown dependency          */
   /*---(drawing)------------------------*/
   char        d_layout;
   char        d_size;
   char        d_decor;
   char        x_cols;
   int         x_min;
   int         x_max;
   int         x_end;
   char        x_side;
   char        x_gap;
   char        x_wide;
   char        y_rows;
   int         y_min;
   int         y_max;
   int         y_end;
   char        y_side;
   char        y_gap;
   char        y_tall;
   /*---(done)---------------------------*/
};
extern      tGLOBALS    my;


#define     B_NODE         'n'
#define     B_EDGE         'e'
#define     B_WAVE         'W'


typedef struct cWAVE  tWAVE;
struct cWAVE {
   /*---(project)--------------*/
   char        w_verb;
   char        w_found;
   char        w_hint      [LEN_SHORT];
   char        w_proj      [LEN_LABEL];
   /*---(unit)-----------------*/
   char        w_unit      [LEN_TITLE];
   /*---(script)---------------*/
   char        w_scrp;
   char        w_source;
   char        w_desc      [LEN_LONG];
   char        w_expe      [LEN_SHORT];
   int         w_expect;
   char        w_terse     [LEN_LABEL];
   /*---(sequencing)-----------*/
   char        w_wave;
   char        w_stage;
   char        w_rating;
   /*---(statistics)-----------*/
   int         w_nunit;
   int         w_nscrp;
   int         w_ncond;
   int         w_nstep;
   /*---(results)--------------*/
   char        w_ready;
   char        w_time      [LEN_TITLE];
   long        w_last;
   int         w_actual;
   char        w_result;
   int         w_npass;
   int         w_nfail;
   int         w_nbadd;
   int         w_nvoid;
   int         w_nmiss;
   /*---(proj/unit only)-------*/
   int         w_pass;
   int         w_fail;
   int         w_warn;
   int         w_none;
   /*---(project links)--------*/
   char        sort        [LEN_HUND];
   tWAVE      *w_prev_proj;
   tWAVE      *w_next_proj;
   /*---(script links)---------*/
   char        key         [LEN_HUND];
   tWAVE      *w_prev_wave;
   tWAVE      *w_next_wave;
   /*---(sorting)--------------*/
   char        w_unique    [LEN_HUND];
   tSORT      *w_ysort;
   /*---(done)-----------------*/
};

extern tWAVE     *p_head;
extern tWAVE     *p_tail;

extern tWAVE     *s_head;
extern tWAVE     *s_tail;


#define   DEPSOLO      's'
#define   DEPUNIT      'u'

#define   DEPANSI      'a'
#define   DEPPOSIX     'p'

#define   DEPCORE      'c'
#define   DEPVIKEY     'v'
#define   DEPGRAPH     'g'
#define   DEPOTHER     'o'

#define   DEPALIEN     '!'

#define   DEPINPT      'I'
#define   DEPOUTP      'O'
#define   DEPFILE      'F'

#define   DEPWTF       '?'

#define   DEPVISIBLE   "sucvgo!?"

#define   ENTRY_PROG   'p'
#define   ENTRY_UNIT   'u'
#define   ENTRY_WAVE   'w'

#define   TYPE_NONE    '-'
#define   TYPE_MAKE    'M'
#define   TYPE_WAVE    'w'
#define   TYPE_UNIT    'u'
#define   TYPE_MUNIT   'm'
#define   TYPE_HEAD    'h'
#define   TYPE_CODE    'c'
#define   TYPES_VALID  "Mwumhc"

/*===[[ NODES ]]==============================================================*/
#define   MAX_INCL   300
#define   MAX_NODE       100
#define   MAX_LEVEL       20



typedef  struct cINCL      tINCL;
typedef  struct cNODE      tNODE;
typedef  struct cEDGE_OLD  tEDGE_OLD;
typedef  struct cEDGE      tEDGE;



struct cINCL {
   char        i_cat;
   char        i_name      [LEN_TITLE];
   int         i_count;
   char        i_opengl;                /* including in make_opengl.h        */
   char        i_curses;                /* including in make_curses.h        */
   char        i_draw;                  /* include in output drawings        */
   char        i_block;                 /* grouped within node               */
   char        i_zenodotus;             /* add virtual link to zenodotus     */
};
extern tINCL g_incls [MAX_INCL];

struct cNODE {
   /*---(data)--------------*/
   char        n_name      [LEN_TITLE];
   char        n_deps      [LEN_RECD];           /* actual dependencies       */
   char        n_cumd      [LEN_RECD];           /* cumulative dependencies   */
   char        n_miss      [LEN_RECD];           /* brand new dependencies    */
   char        n_focus;
   /*---(working)-----------*/
   char        n_self;
   char        n_level;
   char        n_row;
   char        n_block;
   /*---(predecessors)------*/
   char        n_cpred;
   tEDGE      *n_hpred;
   tEDGE      *n_tpred;
   char        n_filled;
   char        n_ready;
   /*---(successors)--------*/
   char        n_csucc;
   tEDGE      *n_hsucc;
   tEDGE      *n_tsucc;
   /*---(sorting)--------------*/
   tSORT      *n_ysort;
   /*---(done)--------------*/
};
extern tNODE   g_nodes   [MAX_NODE];
extern int     g_nnode;
extern int     g_ready;



/*===[[ EDGES ]]==============================================================*/
#define   MAX_EDGE      2000

struct cEDGE {
   /*---(ends)--------------*/
   tNODE      *e_source;
   tNODE      *e_target;
   /*---(working)-----------*/
   char        e_filled;
   char        e_type;        /* real/clear vs created/assumed    */
   char        e_used;
   /*---(beg-point list)----*/
   tNODE      *e_pprev;
   tNODE      *e_pnext;
   /*---(end-point list)----*/
   tNODE      *e_sprev;
   tNODE      *e_snext;
   /*---(sorting)--------------*/
   char        e_unique    [LEN_DESC];
   tSORT      *e_ysort;
   /*---(done)--------------*/
};
extern tEDGE   g_edges   [MAX_EDGE];


struct cEDGE_OLD {
   /*---(ends)--------------*/
   int         e_nbeg;
   tNODE      *e_beg;
   char        e_filled;
   int         e_nend;
   tNODE      *e_end;
   /*---(working)-----------*/
   char        e_type;        /* real/clear vs created/assumed    */
   char        e_used;
   /*---(beg-point list)----*/
   tNODE      *e_pprev;
   tNODE      *e_pnext;
   /*---(end-point list)----*/
   tNODE      *e_sprev;
   tNODE      *e_snext;
   /*---(sorting)--------------*/
   tSORT      *e_ysort;
   /*---(done)--------------*/
};
extern tEDGE_OLD   g_edges_OLD   [MAX_EDGE];
extern int     g_nedge;
extern char    g_maxlvl;

extern char    g_deps_block  [LEN_RECD];


/*345678901-12345678901-12345678901-12345678901-12345678901-12345678901-123456*/
/*---(support)-----------------*/
char*       PROG_version            (void);
/*---(preinit)-----------------*/
char        PROG__header            (void);
char        PROG_urgents            (int a_argc, char *a_argv []);
/*---(startup)-----------------*/
char        PROG__init              (void);
char        PROG__args              (int a_argc, char *a_argv[]);
char        PROG__begin             (void);
char        PROG_startup            (int a_argc, char *a_argv[]);
/*---(drivers)-----------------*/
char        PROG_driver             (void);
/*---(shutdown)----------------*/
char        PROG__end               (void);
char        PROG_shutdown           (void);
/*---(unittest)----------------*/
char        PROG__unit_quiet        (void);
char        PROG__unit_loud         (void);
char        PROG__unit_end          (void);
/*---(done)--------------------*/



/*---(support)-----------------*/
char        WAVE__wipe              (tWAVE *a_dst, char a_new);
char        WAVE__key               (char a_proj [LEN_LABEL], char a_unit [LEN_TITLE], char a_scrp, char r_key [LEN_LONG], char *r_verb);
/*---(memory)------------------*/
char        WAVE__new               (char a_proj [LEN_LABEL], char a_unit [LEN_TITLE], char a_scrp, char a_gather, tWAVE **r_new);
char        WAVE__free              (tWAVE **a_old);
/*---(program)-----------------*/
char        WAVE_init               (void);
char        WAVE_purge_all          (void);
char        WAVE_purge_proj         (char a_proj [LEN_LABEL]);
char        WAVE_purge_unit         (char a_proj [LEN_LABEL], char a_unit [LEN_TITLE]);
char        WAVE_purge_scrp         (char a_proj [LEN_LABEL], char a_unit [LEN_TITLE], char a_scrp);
char        WAVE_wrap               (void);
/*---(yparse)------------------*/
char        WAVE_handler            (int n, uchar a_verb [LEN_TERSE], char a_exist, void *a_handler);
char        WAVE__pull              (char a_gather, cchar a_file [LEN_PATH]);
char        WAVE_pull_local         (cchar a_file [LEN_PATH]);
char        WAVE_pull_central       (cchar a_file [LEN_PATH]);
char        WAVE_gather             (char a_proj [LEN_TITLE], char a_entry [LEN_TITLE], char a_full [LEN_PATH], char a_type);
/*---(search)------------------*/
int         WAVE_count              (void);
char        WAVE_by_index           (int n, tWAVE **r_cur);
char        WAVE_by_cursor          (char a_dir, tWAVE **r_cur);
char        WAVE_by_proj            (char a_proj [LEN_TITLE], tWAVE **r_cur);
/*---(import)------------------*/
char        WAVE_inventory          (char *a_path);
char        WAVE_here               (void);
/*---(unittest)----------------*/
char*       WAVE__unit              (char *a_question, int n);



char        RPTG_clear              (void);
char        RPTG_spread             (uchar a_wave, uchar a_stage);
char*       RPTG_spread_disp        (void);
char*       RPTG_line               (tWAVE *a_prv, tWAVE *a_cur, char *a_spec);
char        RPTG_heading            (void);
char        RPTG_dump               (void);


char        TEST_result             (tWAVE *a_cur);
char        TEST_run                (tWAVE *a_cur);
char*       TEST__unit              (char *a_question, int n);

/*345678901-12345678901-12345678901-12345678901-12345678901-12345678901-123456*/


char        YJOBS_callback          (cchar a_req, cchar *a_data);




/*===[[ ouroboros_tdb.c ]]====================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
char        TDB_total_proj          (tWAVE *a_proj);
char        TDB_total_unit          (tWAVE *a_unit);
char        TDB_totalize            (void);
/*---(export)------------------*/
char        TDB_write               (char a_full [LEN_PATH]);
/*---(done)--------------------*/



/*===[[ ouroboros_draw.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(program)--------------*/
char        DRAW_init               (char a_layout, char a_size, char a_decor, char a_cols, char a_rows);
char        DRAW_wrap               (void);
/*---(elements)-------------*/
char        DRAW_block_by_abbr      (char a_block);
char        DRAW_node               (short x, short y, char a);
/*---(blocks)---------------*/
char        DRAW_block_layer        (char b, int n);
char        DRAW_block_source       (char a_block, char a_prog [LEN_TITLE]);

char        DRAW_box_clear          (void);

char        DRAW_main               (char a_layout, char a_size, char a_decor);
char        DRAW_main_OLD           (char a_layout, char a_size, char a_decor);

char        GRAPH_box_deps          (char a_name [LEN_TITLE], char r_deps [LEN_RECD]);
char        GRAPH_dump_placement    (void);
/*---(unittest)-------------*/
char*       DRAW__unit              (char *a_question, int n);
/*---(done)-----------------*/



/*===[[ ouroboros_node.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(memory)---------------*/
char        NODE__wipe              (tNODE *a_dst);
char        NODE__new               (char a_proj [LEN_LABEL], char a_force, tNODE **r_new);
char        NODE__free              (tNODE **r_old);
/*---(program)--------------*/
char        NODE_purge              (void);
char        NODE_init               (void);
char        NODE_wrap               (void);
/*---(singles)--------------*/
char        NODE_add                (char a_name [LEN_LABEL], tNODE **r_new);
char        NODE_remove             (char a_name [LEN_LABEL], tNODE **r_old);
/*---(search)---------------*/
int         NODE_count              (void);
char        NODE_by_name            (char a_name [LEN_LABEL], tNODE **r_cur);
int         NODE_by_index           (int  n, tNODE **r_cur);
char        NODE_by_cursor          (char a_dir, tNODE **r_cur);
/*---(report)------------------*/
char*       NODE_line               (int n);
char        NODE_dump               (void);
/*---(unittest)----------------*/
char*       NODE__unit              (char *a_question, int n);
/*---(done)-----------------*/



/*===[[ ouroboros_node.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(memory)---------------*/
char        EDGE__wipe              (tEDGE *a_dst);
char        EDGE__new               (tNODE *a_source, tNODE *a_target, char a_force, tEDGE **r_new);
char        EDGE__free              (tEDGE **r_old);
/*---(program)--------------*/
char        EDGE_init               (void);
char        EDGE_wrap               (void);
/*---(singles)--------------*/
char        EDGE__hook_source       (tNODE *a_source, tEDGE *a_edge);
char        EDGE__hook_target       (tNODE *a_target, tEDGE *a_edge);
char        EDGE_add                (tNODE *a_beg, tNODE *a_end, char a_type, tEDGE **r_new);
char        EDGE_add_by_names       (char a_source [LEN_LABEL], char a_target [LEN_LABEL], char a_type, tEDGE **r_new);
char        EDGE__unhook_source     (tEDGE *a_edge);
char        EDGE__unhook_target     (tEDGE *a_edge);
char        EDGE_remove             (tEDGE **b_old);
char        EDGE_purge              (void);
char        EDGE_purge_for_node     (tNODE *a_node);
/*---(search)---------------*/
int         EDGE_count              (void);
char        EDGE_by_path            (char a_path [LEN_DESC] , tEDGE **r_cur);
int         EDGE_by_index           (int  n                 , tEDGE **r_cur);
char        EDGE_by_cursor          (char a_dir             , tEDGE **r_cur);
/*---(report)------------------*/
char*       EDGE_line               (int n);
/*---(unittest)----------------*/
char*       EDGE__unit              (char *a_question, int n);
/*---(done)-----------------*/



/*===[[ ouroboros_graph.c ]]==================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(program)--------------*/
char        GRAPH_purge             (void);
char        GRAPH_init              (void);
/*---(nodes)----------------*/
int         GRAPH_by_name           (char a_name [LEN_TITLE]);
int         GRAPH_add_node          (char a_name [LEN_TITLE]);
char*       GRAPH_node_line         (int n);
char        GRAPH_dump_nodes        (void);
/*---(edges)----------------*/
char        GRAPH_edge_add          (char a_type, char a_beg [LEN_TITLE], int a_end);
char        GRAPH_edge_real         (char a_beg [LEN_TITLE], int a_end);
char        GRAPH_edge_virt         (char a_beg [LEN_TITLE], int a_end);
char        GRAPH_dump_edges        (void);
/*---(deps)-----------------*/
/*> char        GRAPH_deps_add          (char a_name [LEN_TITLE], char a_deps [LEN_RECD]);   <*/
/*> char        GRAPH_deps_merge        (char a_deps [LEN_RECD], char r_cumd [LEN_RECD]);   <*/
/*> char        GRAPH_deps_solve        (void);                                       <*/
/*> char        GRAPH_dump_deps         (void);                                       <*/
/*---(focus)----------------*/
char        GRAPH_focus_pred        (int n);
char        GRAPH_focus_on          (char a_prog [LEN_TITLE]);
char        GRAPH_focus_all         (void);
/*---(sequence)-------------*/
char        GRAPH_seq_clear         (void);
char        GRAPH_solve_layer       (char a_mark, char a_lvl);
char        GRAPH_solve             (char a_mark);
char        GRAPH_dump_seq          (void);
char        GRAPH_dump_all          (void);
/*---(unittest)-------------*/
char*       GRAPH__unit             (char *a_question, int n);
/*---(done)-----------------*/



/*===[[ ouroboros_incl.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(program)--------------*/
char        INCL_purge              (void);
char        INCL_init               (void);
char        INCL_wrap               (void);
char        INCL_zenodotus          (void);
/*---(lists)----------------*/
char        INCL_clear              (void);
char        INCL_add                (int n, char a_cat, char a_header [LEN_TITLE]);
char        INCL_add_by_group       (char a_project [LEN_LABEL], char a_group);
/*---(find)-----------------*/
int         INCL_by_name            (char a_header [LEN_TITLE]);
char        INCL_data               (int n, char *r_cat, char r_name [LEN_TITLE], int *r_count, char *r_opengl, char *r_curses, char *r_draw, char *r_block, char *r_zeno);
/*---(gather)---------------*/
char        INCL_gather_detail      (char a_project [LEN_LABEL], char a_entry [LEN_TITLE]);
char        INCL_gather             (char a_project [LEN_LABEL], char a_recd [LEN_RECD]);
/*---(report)---------------*/
char        INCL_list               (void);
char        INCL_finalize           (char a_proj [LEN_LABEL], char a_full [LEN_PATH]);
char        INCL_block              (char a_proj [LEN_TITLE]);
/*---(unittest)-------------*/
char*       INCL__unit              (char *a_question, int n);
/*---(done)-----------------*/



/*===[[ ouroboros_deps.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
/*---(single)---------------*/
char        DEPS__defense           (char a_source [LEN_LABEL], char a_target [LEN_LABEL]);
char        DEPS__ends              (char a_source [LEN_LABEL], char a_target [LEN_LABEL], char a_force, int *r_beg, tNODE **r_src, tNODE **r_trg);
char        DEPS__add               (char a_source [LEN_LABEL], char a_target [LEN_LABEL], char a_force);
char        DEPS_add                (char a_source [LEN_LABEL], char a_target [LEN_LABEL]);
char        DEPS_force              (char a_source [LEN_LABEL], char a_target [LEN_LABEL]);
/*---(lists)----------------*/
char        DEPS_merge              (char a_deps [LEN_RECD], char r_cumd [LEN_RECD]);
char        DEPS_missing            (char a_deps [LEN_RECD], char a_cumd [LEN_RECD], char a_block [LEN_RECD], char r_miss [LEN_RECD]);
/*---(solution)-------------*/
char        DEPS__layer             (int n);
char        DEPS_gather             (void);
/*---(report)---------------*/
char        DEPS_dump               (void);
/*---(done)-----------------*/



/*===[[ ouroboros_make.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
char        MAKE_gather             (char a_proj [LEN_LABEL], char a_recd [LEN_RECD]);
/*---(done)-----------------*/



/*===[[ ouroboros_make.c ]]===================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
char        DATA_file_type          (char a_project [LEN_LABEL], char a_file [LEN_HUND], char *r_type);
char        DATA_gather_prep        (char a_file [LEN_PATH], char a_type, char r_file [LEN_PATH]);
char        DATA_gather_file        (char a_project [LEN_LABEL], char a_entry [LEN_TITLE], char a_full [LEN_PATH], char a_type);
char        DATA_gather_project     (char a_full [LEN_PATH]);
/*---(done)-----------------*/



/*===[[ ouroboros_yunit.c ]]==================================================*/
/*иииииииии ┤ииииииииииииииииииииии ┤иииииииииииииииииииииииииииииииииииииииии*/
char        YUNIT_gather            (char a_proj [LEN_TITLE], char a_recd [LEN_RECD]);
/*---(done)-----------------*/





#endif
/*============================[[ end-of-code ]]===============================*/
