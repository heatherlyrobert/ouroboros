#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [··/·]  (DEPS) verify adding dependencies to graph node                     0s  add             DEPS_add                                                                     ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   int       x_end   = -1;                                                                                                                                                                                                    

   COND       add a graph node to prepare                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add node                             GRAPH_add_node              "ouroboros"                                                                                           i_equal     0                                                                                                     x_end                
     echo     ... check number                     - - - - - - - - - - - - -   x_end                                                                                                 i_gequal    0                                                                                                                            

   COND       verify new node                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   1n,   0e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ouroboros            - -  · ·                    ·                     · ·    · ·                    ·                      ´ åæ
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ

   COND       verify adding dependency (no node for dep)                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add dependency                       DEPS_add                    "stdio"               , "ouroboros"                                                                   i_equal     1                                                                                                    

   COND  (0)  verify new node                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   1n,   0e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ouroboros            - -  · ·                    ·                     · ·    · ·                    ·                      ´ å,stdio,æ
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ

   COND       attempt to add a duplicate                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add dependency                       DEPS_add                    "stdio"               , "ouroboros"                                                                   i_equal     2                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify adding dependency (requiring a node)                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add dependency                       DEPS_add                    "yURG"                , "ouroboros"                                                                   i_equal     1                                                                                                    

   COND       verify new node                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   2n,   1e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ouroboros            - -  1 yURG                 yURG                  0 -    · ·                    ·                      ´ å,stdio,yURG,æ
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : yURG                 - -  · ·                    ·                     · ·    1 ouroboros            ouroboros              ´ åæ
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ

   COND       verify adding a solo/uver                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add dependency                       DEPS_add                    "yENV_uver"           , "ouroboros"                                                                   i_equal     1                                                                                                    

   COND       verify new node                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   4n,   3e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ouroboros            - -  2 yURG                 yENV_uver             0 -    · ·                    ·                      ´ å,stdio,yURG,yENV_uver,æ
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : yURG                 - -  · ·                    ·                     · ·    1 ouroboros            ouroboros              ´ åæ
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : yENV_uver            - -  1 zenodotus            zenodotus             0 -    1 ouroboros            ouroboros              ´ å,zenodotus,æ
     get      ... review node                      GRAPH__unit                 "full"        , 3                                                                                     s_equal     GRAPH node  ( 3) : zenodotus            - -  · ·                    ·                     · ·    1 yENV_uver            yENV_uver              ´ åæ
     get      ... review node                      GRAPH__unit                 "full"        , 4                                                                                     s_equal     GRAPH node  ( 4) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [··/·]  (DEPS) verify merging dependency lists                              0s  merge           DEPS_merge                                                                   ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char      x_cumd  [LEN_RECD]  = "";                                                                                                                                                                                        

   COND       verify merge against empties                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call merge                           DEPS_merge                  ",stdio,"                                                                                 , x_cumd    i_equal     1                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,æ                                                                                             

   COND       attempt to merge duplicate                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call merge                           DEPS_merge                  ",stdio,"                                                                                 , x_cumd    i_equal     0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,æ                                                                                             

   COND       verify merging another                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call merge                           DEPS_merge                  ",string,"                                                                                , x_cumd    i_equal     1                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,string,æ                                                                                      

   COND       attempt a NULL and empty input                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call merge                           DEPS_merge                  NULL                                                                                      , x_cumd    i_lesser    0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,string,æ                                                                                      
     exec     call merge                           DEPS_merge                  ""                                                                                        , x_cumd    i_equal     0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,string,æ                                                                                      
     exec     call merge                           DEPS_merge                  "´"                                                                                       , x_cumd    i_equal     0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,string,æ                                                                                      

   COND       verify both duplicates and new                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call merge                           DEPS_merge                  ",string,yURG,stdio,yLOG,"                                                                , x_cumd    i_equal     2                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,stdio,string,yURG,yLOG,æ                                                                            

   COND       verify merge into empties                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     clear result                         - - - - - - - - - - - - -   strcpy (x_cumd, "");                                                                                                                                                                                                       
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     åæ                                                                                                    
     exec     call merge                           DEPS_merge                  ",string,yURG,stdio,yLOG,"                                                                , x_cumd    i_equal     4                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,string,yURG,stdio,yLOG,æ                                                                            
     code     clear result                         - - - - - - - - - - - - -   strcpy (x_cumd, "´");                                                                                                                                                                                                      
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å´æ                                                                                                   
     exec     call merge                           DEPS_merge                  ",string,yURG,stdio,yLOG,"                                                                , x_cumd    i_equal     4                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_cumd                                                                                                w_equal     å,string,yURG,stdio,yLOG,æ                                                                            

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [··/·]  (DEPS) verify finding missing dependencies                          0s  miss            DESP_missing                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char      x_miss  [LEN_RECD]  = "";                                                                                                                                                                                        

   COND       verify merge against empties                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                ",yURG,"                     , "´"                          , ""                           , x_miss   i_equal     1                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_miss                                                                                                w_equal     å,yURG,æ                                                                                              

   COND       attempt with NULLs                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                NULL                         , "´"                          , ""                           , x_miss   i_lesser    0                                                                                                    
     exec     call missing                         DEPS_missing                ",stdio,"                    , NULL                         , ""                           , x_miss   i_lesser    0                                                                                                    
     exec     call missing                         DEPS_missing                ",stdio,"                    , "´"                          , ""                           , NULL     i_lesser    0                                                                                                    

   COND       verify with no new libraries                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                ",stdio,string,yURG,"        , ",stdio,string,yURG,"        , ""                           , x_miss   i_equal     0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_miss                                                                                                w_equal     åæ                                                                                                    

   COND       verify with more previous than new                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                ",stdio,"                    , ",stdio,string,yURG,"        , ""                           , x_miss   i_equal     0                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_miss                                                                                                w_equal     åæ                                                                                                    

   COND       verify with more new than previous                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                ",yLOG,string,koios,"        , ",string,"                   , ""                           , x_miss   i_equal     2                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_miss                                                                                                w_equal     å,yLOG,koios,æ                                                                                        

   COND       verify with one in block                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call missing                         DEPS_missing                ",yLOG,string,koios,"        , ",string,"                   , ",koios,"                    , x_miss   i_equal     1                                                                                                    
     echo     ... review result                    - - - - - - - - - - - - -   x_miss                                                                                                w_equal     å,yLOG,æ                                                                                        

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    
