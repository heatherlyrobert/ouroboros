#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [0a/·]  (MAKE) verify checking make file entries                            0s  add             MAKE_gather                                                                  ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   int       x_end   = -1;                                                                                                                                                                                                    

   COND       verify empty                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depall                                                                                             w_equal     å´æ                                                                                                   

   COND       add a project/graph node to prepare                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add node                             GRAPH_add_node              "ouroboros"                                                                                           i_equal     0                                                                                                     x_end                
     echo     ... check number                     - - - - - - - - - - - - -   x_end                                                                                                 i_gequal    0                                                                                                                            

   COND       verify quick success                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 "include /usr/local/sbin/zeno_make"                                                          , x_end  i_equal     1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å,zenodotus,æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   

   COND       add a project/graph node to prepare                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add node                             GRAPH_add_node              "bad"                                                                                                 i_equal     2                                                                                                     x_end                
     echo     ... check number                     - - - - - - - - - - - - -   x_end                                                                                                 i_gequal    2                                                                                                                            

   COND       attempt with c-style include                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             

   COND       attempt with bad entries                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 NULL                                                                                         , x_end  i_lesser    1                                                                                                    
     exec     call check                           MAKE_gather                 ""                                                                                           , x_end  i_lesser    1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             

   COND       attempt with variations on include   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 "include"                                                                                    , x_end  i_lesser    1                                                                                                    
     exec     call check                           MAKE_gather                 "#include /usr/local/sbin/zeno_make"                                                         , x_end  i_lesser    1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             

   COND       attempt with zeno prep entry                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 "include /usr/local/sbin/zeno_prep"                                                          , x_end  i_lesser    1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             

   COND       attempt without include                                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 "/usr/local/sbin/zeno_prep"                                                                  , x_end  i_lesser    1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             

   COND       add a project/graph node to prepare                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     add node                             GRAPH_add_node              "duplicate"                                                                                           i_equal     3                                                                                                     x_end                
     echo     ... check number                     - - - - - - - - - - - - -   x_end                                                                                                 i_gequal    3                                                                                                                            

   COND       verify duplicate catching                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clear lists                          INCL_list_clear                                                                                                                   i_equal     0                                                                                                    
     exec     call check                           MAKE_gather                 "include /usr/local/sbin/zeno_make"                                                          , x_end  i_equal     1                                                                                                    
     exec     call check                           MAKE_gather                 "include /usr/local/sbin/zeno_make"                                                          , x_end  i_equal     1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å,zenodotus,æ                                                                                                   

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [0a/·]  (MAKE) verify gathering a make file                                 0s  gather          DATA_gather                                                                  ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char     *x_make  = "/tmp/Makefile";                                                                                                                                                                                       

   COND       verify empty state                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   0n,   0e,   0r,   0f, empty                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 
     get      ... review node                      GRAPH__unit                 "full"        , 3                                                                                     s_equal     GRAPH node  ( 3) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 
     get      ... review node                      GRAPH__unit                 "full"        , 4                                                                                     s_equal     GRAPH node  ( 4) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 

   COND       verify on simple file, no valid entries                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clean up file                        yENV_rm                     x_make                                                                                                c_equal     '-'                                                                                                  
     file     create and clear file                - - - - - - - - - - - - -   [[ x_make ]]                                                                                                                                                                                                               
     append   add lines                            - - - - - - - - - - - - -   #================================[[ beg-code ]]================================#
     append   add lines                            - - - - - - - - - - - - -   NAME_BASE  = ouroboros
     append   add lines                            - - - - - - - - - - - - -   LIB_STD    = 
     append   add lines                            - - - - - - - - - - - - -   LIB_MINE   = -lySTR_debug -lySORT_debug -lyPARSE_debug -lyUNIT_debug -lyJOBS_debug -lyENV_debug -lyASCII_debug
     append   add lines                            - - - - - - - - - - - - -   LIB_MYUNIT = 
     append   add lines                            - - - - - - - - - - - - -   INST_DIR   = /usr/local/bin
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #===(post-processing)======================================#
     append   add lines                            - - - - - - - - - - - - -   #install_prep       :
     append   add lines                            - - - - - - - - - - - - -   #remove_prep        :
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #===(master template)======================================#
     append   add lines                            - - - - - - - - - - - - -   include /usr/local/sbin/zeno_make
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #===(post-processing)======================================#
     append   add lines                            - - - - - - - - - - - - -   #install_post       :
     append   add lines                            - - - - - - - - - - - - -   #remove_post        :
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #================================[[ end-code ]]================================#
     get      ... check record count               yENV_lines                  x_make                                                                                                i_equal     19                                                                                                   

   COND       verify gathering                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call gather file                     DATA_gather_file            "yURG"                                , "yURG_main"                      , x_make     , TYPE_MAKE     i_equal     1                                                                                                    

   COND  (0)  verify update                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   2n,   1e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : yURG                 - -  1 zenodotus            zenodotus             0 -    · ·                    ·                      ´ å,zenodotus,æ 
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : zenodotus            - -  · ·                    ·                     · ·    1 yURG                 yURG                   ´ åæ 
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ åæ 

   COND       verify duplicate gathering                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call gather file                     DATA_gather_file            "yURG"                                , "yURG_main"                      , x_make     , TYPE_MAKE     i_equal     1                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clean up file                        yENV_rm                     x_make                                                                                                c_equal     '-'                                                                                                  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    


