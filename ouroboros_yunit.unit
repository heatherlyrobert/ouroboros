#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [1a/·]  (YUNIT) verify checking unit test entries                           0s  add             YUNIT_gather                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    

   COND       verify empty                                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depall                                                                                             w_equal     å´æ                                                                                                   

   COND       verify quick success                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call check                           YUNIT_gather                "ouroboros"  , "   incl      § include public header     § yENV_solo.h        §  - - - - - §", -1     i_equal     1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å,yENV_solo,æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å,koios,æ                                                                                             
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                             
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   

   COND       verifying handling local header                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call check                           YUNIT_gather                "ouroboros"  , "incl   § - - - § ouroboros.h       §  - - - - - §", -1                                i_equal     0                                                                                                    
     exec     call check                           YUNIT_gather                "ouroboros"  , "incl   § - - - § ouroboros_priv.h  §  - - - - - §", -1                                i_equal     0                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å,yENV_solo,æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å,koios,æ                                                                                             
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å´æ                                                                                                                  
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   

   COND       verify again with less space                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call check                           YUNIT_gather                "ouroboros"  , "incl§-§ yENV.h        §  - - - - - §", -1                                             i_equal     1                                                                                                    
     echo     ... review list                      - - - - - - - - - - - - -   my.depsolo                                                                                            w_equal     å,yENV_solo,æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depunit                                                                                            w_equal     å,koios,æ                                                                                             
     echo     ... review list                      - - - - - - - - - - - - -   my.depansi                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depposix                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depcore                                                                                            w_equal     å,yENV,æ                                                                                                             
     echo     ... review list                      - - - - - - - - - - - - -   my.depvikey                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depgraph                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depother                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depalien                                                                                           w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depinpt                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depoutp                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depfile                                                                                            w_equal     å´æ                                                                                                   
     echo     ... review list                      - - - - - - - - - - - - -   my.depwtf                                                                                             w_equal     å´æ                                                                                                   

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP  [2a/·]  (YUNIT) verify gathering a unit file                                0s  gather          DATA_gather                                                                  ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the global data                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char     *x_unit  = "/tmp/ouroboros_yunit.unit";                                                                                                                                                                            

   COND       verify empty state                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   0n,   0e,   0r,   0f, empty                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 3                                                                                     s_equal     GRAPH node  ( 3) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 4                                                                                     s_equal     GRAPH node  ( 4) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 

   COND       verify on simple file, no valid entries                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clean up file                        yENV_rm                     x_unit                                                                                                c_equal     '-'                                                                                                  
     file     create and clear file                - - - - - - - - - - - - -   [[ x_unit ]]                                                                                                                                                                                                               
     append   add lines                            - - - - - - - - - - - - -   #================================[[ beg-code ]]================================#
     append   add lines                            - - - - - - - - - - - - -   #!/usr/local/bin/koios
     append   add lines                            - - - - - - - - - - - - -   #   koios-polos (axis of heaven) unit testing meta-language
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #23456789-12 § 123456789-123456789-123456789-12345 § 123456789-123456789-123456 § 123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789- § 123456789- § 123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789- § 123456789-123456789- §
     append   add lines                            - - - - - - - - - - - - -   #==(verb)=== § ===========(description)=========== § =====(function)=========== § ========================(arguments)================================================================= § ==(test)== § ==========================(results)================================================================= § ========(var)======= §
     append   add lines                            - - - - - - - - - - - - -   PREP         § include the prototype headers                                    § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § - - - - -  § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   ²²²incl      § include public header               § ouroboros.h                § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § - - - - -  § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   ²²²incl      § include private header              § ouroboros_priv.h           § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § - - - - -  § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   ²²²incl      § include outside header              § yLOG_uver.h                § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § - - - - -  § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   #23456789-12 § 123456789-123456789-123456789-12345 § 123456789-123456789-123456 § 123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789- § 123456789- § 123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789- § 123456789-123456789- §
     append   add lines                            - - - - - - - - - - - - -   #==(verb)=== § ===========(description)=========== § =====(function)=========== § ========================(arguments)================================================================= § ==(test)== § ==========================(results)================================================================= § ========(var)======= §
     append   add lines                            - - - - - - - - - - - - -   SCRP  [1a/·] § (YUNIT) verify checking unit test entries                        §  0s § add            § YUNIT_gather                                                                  § ((01.---)) § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   ²²²COND      § initialize the global data                                       § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § ((01.001)) § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   ²²²²²exec    § start testing                       § PROG__unit_quiet           §                                                                                                      § i_equal    § 0                                                                                                    §
     append   add lines                            - - - - - - - - - - - - -   
     append   add lines                            - - - - - - - - - - - - -   ²²²COND      § verify empty                                                     § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  § ((01.001)) § - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  §
     append   add lines                            - - - - - - - - - - - - -   ²²²²²echo    § ... review list                     § - - - - - - - - - - - - -  § my.depsolo                                                                                           § w_equal    § å´æ                                                                                                   §
     append   add lines                            - - - - - - - - - - - - -   ²²²²²get     § ... check record count              § yENV_lines                 § x_unit                                                                                               § i_equal    § 19                                                                                                   §
     get      ... check record count               yENV_lines                  x_unit                                                                                                i_equal     21                                                                                                   

   COND       verify gathering                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call gather file                     DATA_gather_file            "ouroboros"                           , "ouroboros_yunit"                , x_unit     , TYPE_UNIT     i_equal     3                                                                                                    

   COND  (0)  verify update                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review status                    GRAPH__unit                 "count"       , 0                                                                                     s_equal     GRAPH count      :   3n,   2e,   0r,   0f, clear                                                          
     get      ... review node                      GRAPH__unit                 "full"        , 0                                                                                     s_equal     GRAPH node  ( 0) : ouroboros            - -  2 yLOG_uver            koios                 0 -    · ·                    ·                      ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 1                                                                                     s_equal     GRAPH node  ( 1) : yLOG_uver            - -  · ·                    ·                     · ·    1 ouroboros            ouroboros              ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 2                                                                                     s_equal     GRAPH node  ( 2) : koios                - -  · ·                    ·                     · ·    1 ouroboros            ouroboros              ´ 
     get      ... review node                      GRAPH__unit                 "full"        , 3                                                                                     s_equal     GRAPH node  ( 3) : ·                    · ·  · ·                    ·                     · ·    · ·                    ·                      ´ 

   COND       verify duplicate gathering                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call gather file                     DATA_gather_file            "ouroboros"                           , "ouroboros_yunit"                , x_unit     , TYPE_UNIT     i_equal     3                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     clean up file                        yENV_rm                     x_unit                                                                                                c_equal     '-'                                                                                                  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



